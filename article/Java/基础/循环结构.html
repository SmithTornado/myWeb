<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java循环结构</title>
    <link rel="stylesheet" href="../../../highlight/styles/arta.min.css">
    <link rel="stylesheet" href="../../../css/article-common.css">
</head>
<body>
    <h1>Java循环结构</h1>
    <p>循环结构是Java流程控制核心，核心逻辑是<span style="color:#f56c6c">满足条件时重复执行指定代码块</span>，打破线性执行规则，减少重复代码编写。Java常用3类循环：<code>for</code>（已知循环次数首选）、<code>while</code>（未知次数靠条件控制）、<code>do-while</code>（至少执行1次），配合<code>break</code>/<code>continue</code>可灵活控制循环流程。</p>

    <section>
        <h2>一、for循环（已知次数，最常用）</h2>
        <p>专门适配「循环次数明确」的场景（如遍历数组、固定次数累加），语法紧凑，将初始化、条件判断、更新逻辑整合在一处，可读性强。</p>

        <h3>1. 标准for循环</h3>
        <h4>语法格式</h4>
        <pre><code class="language-java">for (初始化表达式; 布尔条件表达式; 更新表达式) {
    // 循环体：条件为true时重复执行的代码块（单句可省{}，不推荐）
}</code></pre>
        <h4>核心执行流程</h4>
        <ol>
            <li>初始化表达式：循环前执行1次，用于定义循环变量（如int i=0）。</li>
            <li>条件表达式：每次循环前判断，true则执行循环体，false直接终止循环。</li>
            <li>更新表达式：每次循环体执行完后执行，用于修改循环变量（如i++），再回到步骤2重复判断。</li>
        </ol>
        <h4>实战示例1：累加求和（1~100求和）</h4>
        <pre><code class="language-java">public class ForSum {
    public static void main(String[] args) {
        int sum = 0; // 存储累加结果
        // 初始化i=1，i<=100时执行循环，每次i+1
        for (int i = 1; i <= 100; i++) {
            sum += i; // 循环体：累加i到sum
        }
        System.out.println("1~100累加和：" + sum); // 结果5050
    }
}</code></pre>
        <h4>实战示例2：遍历数组（打印数组所有元素）</h4>
        <pre><code class="language-java">public class ForArray {
    public static void main(String[] args) {
        int[] arr = {11, 22, 33, 44, 55};
        // 循环变量i作为数组下标，从0到arr.length-1
        for (int i = 0; i < arr.length; i++) {
            System.out.print(arr[i] + " "); // 打印下标i对应的元素
        }
    }
}</code></pre>

        <h3>2. 增强for循环（foreach，遍历专属）</h3>
        <p>JDK5+新增，专门用于「遍历数组/集合」，无需关心下标，直接获取每个元素，语法简洁，无下标越界风险。</p>
        <h4>语法格式</h4>
        <pre><code class="language-java">for (数据类型 变量名 : 数组/集合) {
    // 循环体：变量名接收数组/集合的每个元素，依次执行
}</code></pre>
        <h4>实战示例：遍历数组与字符串</h4>
        <pre><code class="language-java">public class ForEach {
    public static void main(String[] args) {
        // 1. 遍历int数组
        int[] scores = {85, 92, 78, 98};
        System.out.println("成绩列表：");
        for (int score : scores) { // score依次接收数组每个元素
            System.out.print(score + " ");
        }

        // 2. 遍历字符串（按字符逐个获取）
        String str = "Java循环";
        System.out.println("\n字符串字符：");
        for (char ch : str.toCharArray()) {
            System.out.print(ch + " ");
        }
    }
}</code></pre>
        <p><strong>注意</strong>：增强for循环无法修改数组/集合元素本身（仅获取值），需修改元素需用标准for循环（下标操作）。</p>
    </section>

    <section>
        <h2>二、while循环（未知次数，条件控制）</h2>
        <p>适配「循环次数未知，仅靠条件控制终止」的场景（如用户输入正确值为止），语法简洁，初始化在循环外，条件判断在循环前。</p>

        <h3>1. 语法格式</h3>
        <pre><code class="language-java">// 初始化表达式（循环前单独定义，不在循环语法内）
while (布尔条件表达式) {
    // 循环体：条件为true时执行，执行完回到条件判断
    // （必须含更新逻辑，否则易死循环）
}</code></pre>

        <h3>2. 核心执行流程</h3>
        <ol>
            <li>执行循环外的初始化逻辑（仅1次）。</li>
            <li>判断条件表达式，true执行循环体，false终止循环。</li>
            <li>循环体执行完后，无自动更新逻辑，需手动在循环体内添加（如变量自增/修改），再回到步骤2。</li>
        </ol>

        <h3>3. 实战示例1：累加求和（直到和大于100）</h3>
        <pre><code class="language-java">public class WhileSum {
    public static void main(String[] args) {
        int sum = 0;
        int i = 1; // 初始化循环变量（循环外定义）
        // 条件：sum<=100时继续循环
        while (sum <= 100) {
            sum += i;
            i++; // 手动更新循环变量（避免死循环）
        }
        System.out.println("和大于100时的总和：" + sum);
        System.out.println("累计到的数字：" + (i-1));
    }
}</code></pre>

        <h3>4. 实战示例2：用户输入验证（直到输入正确）</h3>
        <pre><code class="language-java">import java.util.Scanner;

public class WhileInput {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int age = 0;
        // 条件：age不在0~120之间，继续要求输入
        while (age < 0 || age > 120) {
            System.out.print("请输入正确年龄（0~120）：");
            age = sc.nextInt();
        }
        System.out.println("你输入的年龄：" + age);
        sc.close();
    }
}</code></pre>
</section>

    <section>
        <h2>三、do-while循环（至少执行1次）</h2>
        <p>与while循环逻辑类似，核心区别是「先执行循环体，再判断条件」，无论条件是否成立，循环体至少执行1次，适配「必须先执行1次逻辑」的场景（如菜单展示）。</p>

        <h3>1. 语法格式</h3>
        <pre><code class="language-java">// 初始化表达式（循环前定义）
do {
    // 循环体：先执行1次，再判断条件
    // （需含更新逻辑，避免死循环）
} while (布尔条件表达式); // 分号不可漏，否则编译报错</code></pre>

        <h3>2. 核心执行流程</h3>
        <ol>
            <li>执行循环外的初始化逻辑（仅1次）。</li>
            <li>先执行1次循环体。</li>
            <li>判断条件表达式，true则回到步骤2重复执行，false终止循环。</li>
        </ol>

        <h3>3. 实战示例：菜单循环（至少展示1次菜单）</h3>
        <pre><code class="language-java">import java.util.Scanner;

public class DoWhileMenu {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int choice = 0; // 初始化选择项
        do {
            // 循环体：先展示菜单（至少展示1次）
            System.out.println("\n===== 简易菜单 =====");
            System.out.println("1. 查看信息");
            System.out.println("2. 修改信息");
            System.out.println("3. 退出程序");
            System.out.print("请选择功能（1-3）：");
            choice = sc.nextInt();
            
            // 根据选择执行对应逻辑
            switch (choice) {
                case 1:
                    System.out.println("执行查看信息功能");
                    break;
                case 2:
                    System.out.println("执行修改信息功能");
                    break;
                case 3:
                    System.out.println("退出程序中...");
                    break;
                default:
                    System.out.println("选择错误，请重新输入");
            }
        } while (choice != 3); // 条件：选择不是3，继续循环
        sc.close();
    }
}</code></pre>
        <p><strong>关键注意</strong>：do-while末尾的分号<code>;</code>不可省略，否则编译报错，这是高频易错点。</p>
    </section>

    <section>
        <h2>四、循环控制语句（break/continue）</h2>
        <p>用于灵活干预循环流程，打破默认执行规则，两者作用范围不同，需精准区分。</p>

        <h3>1. break语句（终止循环）</h3>
        <p>执行到break时，<strong>立即终止当前所在的循环</strong>，跳出循环体，执行循环后的代码，适配“满足条件直接结束循环”场景。</p>
        <pre><code class="language-java">public class BreakDemo {
    public static void main(String[] args) {
        // 示例：找到10以内第一个能被3整除的数，找到后终止循环
        for (int i = 1; i <= 10; i++) {
            if (i % 3 == 0) {
                System.out.println("10以内第一个能被3整除的数：" + i);
                break; // 终止for循环，后续i=4~10不再执行
            }
        }
    }
}</code></pre>

        <h3>2. continue语句（跳过本次循环）</h3>
        <p>执行到continue时，<strong>跳过当前循环的剩余代码</strong>，直接回到循环条件判断（for循环回到更新表达式），进入下一次循环，适配“跳过特定条件的循环体执行”场景。</p>
        <pre><code class="language-java">public class ContinueDemo {
    public static void main(String[] args) {
        // 示例：打印1~10的奇数（跳过偶数）
        System.out.println("1~10的奇数：");
        for (int i = 1; i <= 10; i++) {
            if (i % 2 == 0) {
                continue; // 跳过偶数，不执行后续打印语句，直接i++
            }
            System.out.print(i + " ");
        }
    }
}</code></pre>

        <h3>3. 两者核心区别</h3>
        <ul>
            <li>break：终止整个循环，循环彻底结束。</li>
            <li>continue：仅跳过本次循环剩余代码，循环继续执行下一次。</li>
        </ul>
    </section>

    <section>
        <h2>五、三种循环对比（选型指南）</h2>
        <table border="1" cellpadding="8" cellspacing="0" style="width:100%;border-collapse:collapse;margin:10px 0;">
            <tr style="background:#f5f5f5;">
                <<th>对比维度</</th>
                <<th>for循环</</th>
                <<th>while循环</</th>
                <<th>do-while循环</</th>
            </tr>
            <tr>
                <td>核心适配场景</td>
                <td>循环次数明确（如遍历数组、固定次数执行）</td>
                <td>循环次数未知，靠条件控制终止</td>
                <td>循环体必须至少执行1次（如菜单、输入验证）</td>
            </tr>
            <tr>
                <td>执行顺序</td>
                <td>先判断条件，再执行循环体</td>
                <td>先判断条件，再执行循环体</td>
                <td>先执行循环体，再判断条件</td>
            </tr>
            <tr>
                <td>初始化位置</td>
                <td>循环语法内（变量作用域仅限循环内）</td>
                <td>循环语法外（变量作用域覆盖循环后代码）</td>
                <td>循环语法外（同while）</td>
            </tr>
            <tr>
                <td>语法特点</td>
                <td>初始化、条件、更新整合，紧凑清晰</td>
                <td>语法简洁，仅含条件判断</td>
                <td>末尾分号不可漏，至少执行1次</td>
            </tr>
        </table>
        <p><strong>选型原则</strong>：<br>
        1. 已知次数→for循环；未知次数→while循环；必须执行1次→do-while循环。<br>
        2. 遍历数组/集合→优先增强for循环（无下标风险）。</p>
    </section>

    <section>
        <h2>六、循环使用注意事项（避坑关键）</h2>
        <ul>
            <li>避免死循环：循环必须有终止条件（条件最终会变为false），且循环体内需有更新逻辑（如i++、变量修改），否则循环无限执行，程序卡死（如<code>while(true){}</code>需配合break使用）。</li>
            <li>下标不越界：标准for循环遍历数组时，下标范围需为<code>0~arr.length-1</code>，不可写<code>i<=arr.length</code>（越界报错）。</li>
            <li>do-while分号不可漏：末尾<code>;</code>是语法要求，缺失会编译报错，需牢记。</li>
            <li>循环变量作用域：for循环内初始化的变量（如<code>for(int i=0;...)</code>），仅在循环内可用，循环外无法访问。</li>
            <li>break/continue作用范围：仅作用于当前所在循环，嵌套循环中不影响外层循环（如需终止外层循环，可加标签，入门阶段暂不深入）。</li>
        </ul>
        <pre><code class="language-java">public class LoopRule {
    public static void main(String[] args) {
        // 错误1：死循环（无更新逻辑，i永远=1，条件永远true）
        // int i=1;
        // while(i<=10) {
        //     System.out.println(i);
        // }

        // 错误2：数组下标越界（i<=arr.length，最后i=5超出0~4范围）
        int[] arr = {1,2,3,4,5};
        // for(int i=0; i<=arr.length; i++) {
        //     System.out.println(arr[i]);
        // }

        // 正确：i<arr.length
        for(int i=0; i<arr.length; i++) {
            System.out.println(arr[i]);
        }
    }
}</code></pre>
    </section>

    <section>
        <h2>七、循环结构最佳实践</h2>
        <ul>
            <li>循环次数明确用for：固定次数场景优先for循环，逻辑整合更清晰，变量作用域可控。</li>
            <li>循环体简洁高效：循环体代码不超过10行，复杂逻辑拆分为方法调用（如<code>handleData(i);</code>），提升可读性。</li>
            <li>避免循环内重复计算：不变的表达式（如<code>arr.length</code>）提取到循环外（如<code>int len=arr.length; for(int i=0;i<len;...)</code>），减少重复计算。</li>
            <li>变量命名规范：循环变量优先用<code>i、j、k</code>（单层/嵌套循环区分），业务相关变量见名知意（如<code>score</code>、<code>count</code>）。</li>
            <li>死循环需加出口：必要时使用<code>while(true)</code>死循环，需在循环体内添加break（如满足条件时终止），避免程序卡死。</li>
        </ul>
        <pre><code class="language-java">public class LoopBestPractice {
    public static void main(String[] args) {
        int[] scores = {78, 85, 92, 66, 98};
        // 最佳实践1：提取不变表达式到循环外
        int len = scores.length;
        int passCount = 0; // 统计及格人数

        // 最佳实践2：循环变量命名规范，循环体简洁
        for (int i = 0; i < len; i++) {
            if (isPass(scores[i])) { // 最佳实践3：复杂逻辑拆方法
                passCount++;
            }
        }
        System.out.println("及格人数：" + passCount);
    }

    // 提取判断及格的方法，复用且清晰
    private static boolean isPass(int score) {
        return score >= 60;
    }
}</code></pre>
    </section>

    <script type="text/javascript" src="../../../highlight/highlight.min.js"></script>
    <script type="text/javascript" src="../../../js/article-common.js"></script>
    <script type="text/javascript">hljs.highlightAll();</script>
    <script>
        addCopy('pre', 20, 20)            
    </script>
</body>
</html>
